### Критерии оценки

1. Удовлетворительно - 1 модуль
2. Хорошо - 1, 2 модуль
3. Отлично - 1, 2 и 3 модуль

### Настройка проекта

1. Создание виртуальной среды

- Linux

```commandline
    python3 -m venv .venv
    source .venv/bin/activate
```

- Windows

```commandline
py -m venv .venv
.venv/scripts/activate
```

2. Установка зависимостей

```commandline
pip install requirements.txt
```

Дополнительные инструкции по выполнению задания (модули 1-3):

1. Запуск и подготовка

- Создайте виртуальную среду и активируйте её (Windows):

```powershell
py -m venv .venv
.venv\Scripts\Activate
pip install -r requirements.txt
```

- Выполните миграции и загрузите фикстуры с начальными данными:

```powershell
py manage.py makemigrations
py manage.py migrate
py manage.py loaddata shop/fixtures/initial_data.json
```

2. Инициализация ролей

- Создать стандартные группы (client, manager, admin):

```powershell
py manage.py init_roles
```

3. Запуск сервера разработки

```powershell
py manage.py runserver
```

4. Тесты

- Запустить тесты:

```powershell
py manage.py test
```

PostgreSQL (локальная настройка)

- Рекомендуется использовать Docker Compose для быстрого создания БД. В репозитории есть `docker-compose.yml`.

Запуск PostgreSQL с Docker Compose:

```powershell
docker-compose up -d
```

Переменные окружения (если вы не используете Docker Compose):

- `POSTGRES_DB` — имя БД (по умолчанию `django_demo`)
- `POSTGRES_USER` — пользователь (по умолчанию `postgres`)
- `POSTGRES_PASSWORD` — пароль
- `POSTGRES_HOST` — хост БД (по умолчанию `localhost`)
- `POSTGRES_PORT` — порт (по умолчанию `5432`)

Пример запуска миграций с явной передачей переменных (PowerShell):

```powershell
$env:POSTGRES_DB = 'django_demo'; $env:POSTGRES_USER = 'postgres'; $env:POSTGRES_PASSWORD = 'postgres'; py manage.py migrate
```

Если вы планируете деплоить проект, храните секреты и настройки в надежном месте (environment variables, secrets manager или .env, который не попадает в репозиторий).

5. Документы и диаграммы

- ER-диаграмма: `shop/docs/er_diagram.svg` (конвертируйте в PDF через Inkscape или браузер).
- Блок-схема алгоритма: `shop/docs/flowchart.svg`.
- Поместите скриншоты работы приложения в DOCX (файл с примерами и инструкцией можно создать в `docs/screenshots_instructions.md`).

6. Что реализовано

- Модуль 1: модель данных (3NF), админка, миграции, фикстуры.
- Модуль 2: интерфейс (вход/выход, роли), вывод списка товаров, выделение по скидке/отсутствию, валидация полей.
- Модуль 3: последовательный интерфейс (навигация), формы добавления/редактирования/удаления, блокировка редактирования, проверка при удалении, AJAX-поиск/фильтрация/сортировка, удаление старых изображений.

Если хотите, я могу помочь запустить миграции и тесты: вставьте вывод терминала при выполнении `py manage.py migrate`, и я подскажу, как устранить ошибки.

#### **Модуль 1. Разработка базы данных средствами СУБД**

**Задание:**

Компания занимается продажей канцелярских товаров. Очень важно постоянно получать актуальную информацию об остатках товаров на складах, поэтому необходимо реализовать следующие модули.

При запуске приложения окно входа – первое, что видит пользователь. На ней пользователю предлагается ввести свой логин и пароль, взятый из базы данных, или есть возможность перейти на экран просмотра товаров (без фильтрации, сортировки, поиска) в роли гостя.

Только после удачной авторизации пользователь получает доступ к остальным модулям системы:

- **Гость** может просматривать товары (без фильтрации, сортировки, поиска).
- **Авторизованный клиент** может просматривать товары (без фильтрации, сортировки, поиска).
- **Менеджер** может просматривать товары (с фильтрацией, сортировкой, поиском), просматривать заказы.
- **Администратор** может просматривать (с фильтрацией, сортировкой, поиском)/добавлять/редактировать/удалять товары, просматривать /добавлять/редактировать/удалять заказы.

На основе описания предметной области (**Приложение 1**) необходимо создать базу данных в выбранной СУБД для разрабатываемой системы. Обязательна 3 нормальная форма с обеспечением ссылочной целостности. При разработке базы данных обратите внимание на согласованную схему именования, создайте необходимые первичные и внешние ключи.

Получить ER-диаграмму средствами СУБД или ПО для построения и редактирования диаграмм (UML) и блок-схем. ER-диаграмма должна быть представлена в формате PDF и содержать таблицы, связи между ними, атрибуты и ключи (типами данных на данном этапе можно пренебречь).

Заказчик системы предоставил файлы с данными (с пометкой `import` в ресурсах) для переноса в новую систему (**Приложение 2**). Необходимо подготовить данные файлов для импорта и загрузить в разработанную базу данных.

Сохранить полученные результаты: создать скрипт БД или файл конфигурации с данными (`.dt`) (для платформы 1С).

**Необходимые приложения:**

- `Прил_1_ОЗ_Канцтовары-M1.docx`
- `Прил_2_ОЗ_Канцтовары-M1.rar`

---

#### **Модуль 2. Разработка алгоритма и создание приложения**

**Задание:**

Сформировать алгоритм разработки приложения: оформить алгоритм в виде блок-схемы, согласно стандарту ГОСТ 19.701-90. Документ представить в формате `.pdf`.

Компоненты системы должны иметь единый согласованный внешний вид, соответствующий руководству по стилю, представленному в **Приложении 3**. Заголовок окна (страницы) должен соответствовать назначению. Следует установить иконку приложения, если это реализуемо в рамках платформы, и логотип компании на главной форме, из ресурсов.

**Оформление кода:** идентификаторы должны отражать их назначение и соответствовать соглашению об именованию и стилю `CamelCase` (для C# и Java), `snake_case` (для Python) или стандарту для 1С. Допустимо использование не более одной команды в строке.

Созданную базу данных необходимо подключить к приложению, реализующему необходимый функционал. Список товаров должен отображать информацию из базы данных.

**Авторизация**
При запуске приложения окно входа – первое, что видит пользователь. На ней пользователю предлагается ввести свой логин и пароль, взятый из базы данных, или есть возможность перейти на экран просмотра товаров в роли гостя. Только после удачной авторизации пользователь получает доступ к остальным модулям системы.

Реализуйте необходимые интерфейсы для всех пользователей системы (гость, авторизированный клиент, менеджер, администратор). После входа в любую учетную запись должна быть реализована возможность выхода на главный экран – окно входа. При переходе в любую учетную запись в интерфейсе (правый верхний угол) должны отображаться ФИО пользователя.

**Список товаров**
Реализуйте вывод товаров, которые хранятся в базе данных: фото товара (при отсутствии изображения необходимо вывести картинку-заглушку из ресурсов (`picture.png`)), **наименование товара, категория товара (например, "Бумага", "Письменные принадлежности"), описание, производитель, поставщик, цена, единица измерения (шт., уп., набор), количество на складе, действующая скидка.**

Необходимо подсвечивать строки с данными о конкретном товаре в зависимости от размера действующей скидки. В случае если размер скидки превышает 15%, в качестве фона необходимо применить цвет `#2E8B57`. Если у товара снижена цена, то основная цена должна быть перечеркнута, цвет шрифта красный и рядом с ней указана итоговая цена, цвет шрифта черный. Если товара нет на складе, строка выделяется голубым цветом.

Выполнить отладку модуля для проверки функциональности: приложение должно корректно работать и не должно происходить аварийного завершения работы. Создайте документ `.docx` и вложите туда скриншоты корректной работы системы.

**Необходимые приложения:**

- `Прил_3_ОЗ_Канцтовары-M2.docx`

---

#### **Модуль 3. Разработка последовательного пользовательского интерфейса. Создание формы добавления / редактирования товаров. Создание кнопки удаления товаров.**

**Задание:**

Реализовать последовательный пользовательский интерфейс, позволяющий перемещаться между окнами (в том числе обратно, например, с помощью кнопки «Назад»). Обеспечить соответствующий заголовок на каждом окне.

Реализовать обработку исключительных ситуаций в приложении. Необходимо уведомлять пользователя о совершаемых им ошибках (например, ввод отрицательной цены) или о запрещенных действиях. Окна сообщений (ошибка, предупреждение, информация) должны отображаться с соответствующим заголовком и пиктограммой. Использовать комментарии для пояснения неочевидных фрагментов кода.

Реализовать для менеджера и администратора возможность **сортировки** (по количеству на складе), **фильтрации** (по поставщику) и **поиска** (по всем текстовым атрибутам товара). Поиск, сортировка и фильтрация должны происходить в реальном времени и применяться совместно.

Реализовать возможность **добавления и редактирования товаров** (только для администратора) в отдельном окне-форме. Форма должна содержать поля: фото товара (с возможностью загрузки), наименование, категория (выпадающий список), описание, производитель (выпадающий список), поставщик, цена, единица измерения, количество на складе, скидка. При редактировании все поля должны подгружаться из БД. ID товара при редактировании доступно только для чтения.

Администратор может добавить/заменить изображение товара. Изображение должно сохраняться в папку с приложением (рекомендуемое ограничение размера: 300x200 пикселей). В БД должен храниться путь к изображению. Старое фото при замене должно удаляться.

Реализуйте возможность **удаления товара** администратором. Товар, который присутствует в заказе, удалить нельзя. Предусмотрите невозможность открытия более одного окна редактирования одновременно.

После любых изменений (редактирование/добавление/удаление) данные в окне списка товаров должны обновляться.

Все скриншоты результатов необходимо поместить в файл docx и разместить в репозитории.

Все практические результаты должны быть переданы путем загрузки
файлов на предоставленный репозиторий системы контроля версий.
Практические результаты:
– исходный код приложения (структура с файлами, не архив);
– исполняемые файлы;
– файл скрипта базы данных;
– прочие графические/текстовые файлы.
Результаты работ загружать в рамках выполнения задания модуля

**Необходимые приложения:** отсутствуют.
